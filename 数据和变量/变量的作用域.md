# 变量的作用域

作用域控制变量定义的有效范围。高级语言最常用到词法作用域和动态作用域。现代语言更是以词法作用域作为首选。

在javascript中变量如果没有用var进行声明，而是有赋值产生，那么默认为全局变量。这是非常影响程序的模块性的一个语言特征。因为很可能在不知情或不小心的情况下修改了全局变量，从而改变其它函数、模块的功能。

coffee-script的处理要好一些。赋值的变量要在模块中各层作用域中都没有定义过，那么总是默认产生一个本地变量声明。但是，如果在同一模块包含该变量的外层作用域预先定义了该变量，那么变量的赋值的是这个外层的变量。如此处理，模块化的程度要高一些，但是，还是有可能出现不注意而错误地修改外层变量的情况。实际上我在开发太极语言解析器中就曾经因此而导致了bug，花费了不少调试时间。

因此，在太极语言中，默认情况下赋值总是针对本地的变量。如果赋值语句左边是一个变量，而该变量在该作用域下是第一次被赋值，那么太极语言将自动产生一个变量声明语句。

如果要对外层变量赋值，必须在变量名之前添加@@符号。

@@outerVariable = 1
