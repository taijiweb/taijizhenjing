# 语法及解析方法的设计原则 

太极语言设计语法的原则

  对空白敏感的语法
    排版的关键在于安排页面的空白，通过空白组织文字的结构。
    增强可读性的关键是让程序员一瞥之间就能掌握程序的整体，包括整体结构和整体意义。    

  少即是多，多即是少。
    更少的括号，更少的标点，更紧凑的语法，更少的限制，加上适当的空白，意味着能在更短的篇幅提供安排更多的内容，让程序员在更短的时间内输入更多，理解更多。
    反过来，需要更多括号，更多标点，规则上增加更多的限制，不依赖人类可读的空白，而是面向计算机的括号匹配来组织结构，将意味着输入更慢，理解更慢，同样的内容需要更长的篇幅。

  恨括号，shift键，标点
    尽量减少使用括号，特别是远距离配对的括号。
    利用行、缩进等方式，取消传统lisp风格语言中对括号的需要。
    减少使用依赖shift键的符号。
    使用[]而不是()作为s表达式的定界符，允许使用[]表示参数列表，在不影响理解和打破习惯的前提下尽量不使用需要shift键的符号作为常用的语法标记，
    减少使用不必要的标点
      参数的分隔，数组项目的分隔等不需要使用逗号。

  缩进语法
    表达式  

太极语言在语法上带有两个小妖：一个叫精细鬼，一个叫伶俐虫:)，换句话说，太极语言拥有精细、灵活的语法控制能力。

注释
  行内注释：/* */：视同空格
  行注释 //：直到行尾
  代码块注释 行首开始的单个/， 将注释随后的代码块，包括相同缩进的连词块。
  块注释 行首开始的/.，后面的内容只要比该行有更多缩进，则为缩进注释

正规表达式：
  为便于解析，太极语言对正规表达式有一个比javascript更为简单的规则：

  在排除行注释//, 行内注释/*引导符的情况下，赋值号或小括号后面的单个“/”开启一个正规表达式。正规表达式必须在单行内，不能跨行和续行。
  其它情况下/都不引导正规表达式，而是除号或别的符号。
  行首的/ 将引导代码块注释

字符串：
  转义和插补
  转义：以\引导的一系列字符被替换为另一个字符。
  插补：字符串中形如(...), [...], [/.../], {...}的部分先安装表达式进行求值，然后将该值的字符串表示插补到原字符串中。
  '''...'''或"""..."""内的字符串将不被转义。
  '...'或"..." 内的字符串将被转义：将按照javascript的规则进行转义。例如相连的\和n会被替换为换行符号'\n'
  "..."或"""..."""内的字符串可以有插补表达式。
  '...'或'''...'''内的字符串不会被插补。
  原始字符串，原始插补字符串
  转义字符串，转义插补字符串
  转义字符串内部可以有续行符号


主要语法成分
  表达式
    模块，块，缩进块列表，连词子句，括号运算式

原子成分
  字符串
  数字
  变量名：在算式中只允许javascript风格的标记符，另外允许其中出现#或？，但是不得出现其它符号
  运算符：在算式中不允许出现#或？作为运算符。
  \identifier: generate javascript word, identifier, etc.

基本项
  括号表达式
    封闭在括号中的表达式。默认使用[]。
    为什么选用[]作为sexpression的默认括号？一、代码即数据，[]是各种现代语言中列表数据类型的通用括号、二、[]击键方便，不需要shift
  调用式
  对象元素访问式
  js表达式：在小括号内，由若干操作数通过若干运算符根据一定的优先级组合而成的式子。
  冒号式：以冒号引导，以连词、分号或换行结束的若干项目的列表。
  连词子句：以连词引导，以分号或换行结束的若干项目的列表

行与块
  模块
    一组顶级的块

  块
    引导行
      如果引导行由多个分句组成，则不允许跟随缩进子块和连词子块。
    缩进子块
      缩进子块由一组具有相同缩进的块组成。所有缩进块的起始列号大于引导行的起始列号。
    连词子块
      以连词开始的一个块

  行
    分句，连词子句，逗号小句
    子句：以分号或换行结束的若干项目的列表
    关键词语句：以关键词开始的子句，具有特殊的语法，类似于其它语言中的语句
    连词子句：以连词开始，以分号、连词或换行结束的若干项目
    逗号小句：以逗号、分号、连词或换行结束的若干项目的列表
    连词：以冒号结束的词
        if 1 then 2 else 3

        if 1
        then 2
        else 3

        使用标准的、习惯的连词，促进交流，增加可读性

      关键字：
        作为符号的字符串，出现在表头将影响程序的求解过程，出现在其它部位，taiji求解器将利用该符号从环境中查找对应的值。
        作为命令的字符
        if 
        连词：then else

解析指令

  3ab(1+2)
  sinAcosB
  a1+b2
  A3+D5
  AiHj

控制编译的与开发相关的指令
  可以指定某一块在某种状态下不予编译。比如
   (@quoteExpression =)@test quoteExpression = info {
  表示只有在测试状态下才对该段代码予以编译，因为只有在测试状态下才需要探测某些私有成员

解析后的运算符变换

语法规则
  列表综合
    [expression for item in list if condition]

  哈希综合
    {expression for item in list if condition }

语法类型
  gulp pipe
  stream: coffee copy clean mocha
  否则 >> 应该表示向右移位运算
  src >> coffee(...) >> dest

a = chan('a'), b = char('b')
na
na+
a*
na*
a!
na, nb,
na!, na!

w = literal('if')
w!, spaces!, x=clauses!, colon!, then! 

局部语法

单变量表达式（代数表达式）

数据块 [/ /]

怀念中学时代
  当我们刚离开稚气的童年，迈入活力的少年，中学老师教了我们很多的知识，也培养了我们很多习惯。然而，不同的老师总是传授不一样的内容，即使是看起来应该一样的事务。比如，英语老师告诉我们，a是英文的第一个字母，abc是入门的第一课。，而数学老师说a可以表示随便什么东西。abc表示a×b×c，3a+4b表示3×a+4×n。当然，我们的英文作业本上从来没有出现过3a之类的东西。如果出现了，也许老师会疯掉。后来，我们成长为青年，进入了大学，有的人接触了一个叫计算机的东西，教这门课的老师颠覆了我们的很多光年。a×b×c不能写成abc，也不能写成a×b×c。从来没有学生这样尝试过。也许老师看到学生有试图这样尝试的意图，就已经把他赶出了课堂。
  那么，那个老师是正确的？哪个时代有更值得怀念？为了工作，我们总是坚持大学养成的习惯，而内心，却总是希望回到更快乐的少年时光。太极语言给我们一个不需要纠结的机会。